<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hostel Admin Dashboard | Professional View</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                        secondary: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    }
                }
            }
        }
    </script>
    <script type="module" src="https://unpkg.com/heroicons@2.1.1/dist/solid/index.js"></script>
    <script type="module" src="https://unpkg.com/heroicons@2.1.1/dist/outline/index.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        
        .nav-gradient {
            background: linear-gradient(135deg, #0ea5e9 0%, #0369a1 100%);
        }
        
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.5s ease-out;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
            transition: opacity 0.3s ease-in-out;
        }
        
        .modal-content {
            transition: all 0.3s ease-in-out;
            transform: translateY(-20px);
            opacity: 0;
        }
        
        .modal.active .modal-backdrop {
            opacity: 1;
        }
        
        .modal.active .modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        
        .activity-card-image {
            height: 150px;
            object-fit: cover;
            width: 100%;
        }
        
        .btn-primary {
            background-color: #0ea5e9;
            color: white;
            transition: all 0.2s ease;
        }
        
        .btn-primary:hover {
            background-color: #0284c7;
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background-color: #f1f5f9;
            color: #475569;
            transition: all 0.2s ease;
        }
        
        .btn-secondary:hover {
            background-color: #e2e8f0;
        }
        
        .back-btn {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            color: #475569;
            transition: all 0.2s ease;
        }
        
        .back-btn:hover {
            background-color: #f1f5f9;
            color: #0ea5e9;
            border-color: #0ea5e9;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="nav-gradient shadow-lg sticky top-0 z-20">
        <div class="w-full mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex-shrink-0 flex items-center">
                    <hero-icon-solid name="building-library" class="h-7 w-7 text-white mr-2"></hero-icon-solid>
                    <h1 class="text-xl font-bold text-white tracking-tight">HOSTEL MANAGEMENT SYSTEM</h1>
                    <span class="ml-4 text-blue-100 font-normal hidden sm:inline border-l pl-4">Indian Institute of Technology</span>
                </div>
                <div class="flex items-center space-x-6">
                    <button id="show-complaints-view-btn" class="flex items-center text-sm font-medium text-white hover:text-blue-100 transition duration-150">
                        <hero-icon-outline name="bell-alert" class="h-5 w-5 mr-1"></hero-icon-outline>
                        Complaints
                    </button>

                    <a href="adminhandlegymkhana.html" target="_top" class="flex items-center text-sm font-medium text-white hover:text-blue-100 transition duration-150">
                        <hero-icon-outline name="users" class="h-5 w-5 mr-1"></hero-icon-outline>
                        Gymkhana
                    </a>
                    
                    <div class="flex items-center">
                        <span class="text-sm font-medium text-white mr-3 hidden sm:inline">Admin</span>
                        <div class="flex-shrink-0">
                            <span class="inline-flex items-center justify-center h-10 w-10 rounded-full bg-white border-2 border-blue-200 shadow-md">
                                <span class="font-semibold text-primary-600">A</span>
                            </span>
                        </div>
                    </div>
                    
                    <button id="admin-logout-btn" class="flex items-center text-sm font-medium text-white hover:text-blue-100 transition duration-150">
                        <hero-icon-outline name="arrow-right-on-rectangle" class="h-5 w-5 mr-1"></hero-icon-outline>
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full flex-grow">
        
        <!-- Dashboard View -->
        <div id="dashboard-view">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-secondary-800">Admin Dashboard</h1>
                <p class="text-secondary-600 mt-2">Manage hostel operations, students, and resources</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                
                <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-primary-500 card-hover">
                    <div class="flex justify-between items-start">
                        <div>
                            <span class="text-xs font-semibold text-secondary-500 tracking-wider uppercase">TOTAL CAPACITY</span>
                            <p class="text-3xl font-bold text-primary-700 mt-2" id="stat-total-capacity">0</p>
                            <p class="text-sm text-secondary-500 mt-1">Total Hostel Units</p>
                        </div>
                        <div class="p-3 bg-primary-50 rounded-xl">
                            <hero-icon-outline name="building-office-2" class="h-6 w-6 text-primary-500"></hero-icon-outline>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-amber-500 card-hover">
                    <div class="flex justify-between items-start">
                        <div>
                            <span class="text-xs font-semibold text-secondary-500 tracking-wider uppercase">OCCUPANCY RATE</span>
                            <p class="text-3xl font-bold text-amber-700 mt-2" id="stat-occupancy-percent">0%</p>
                            <p class="text-sm text-secondary-500 mt-1">Beds Filled</p>
                        </div>
                        <div class="relative h-20 w-20 flex-shrink-0">
                            <svg class="h-full w-full" width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="18" cy="18" r="16" fill="none" class="text-amber-100 stroke-current" stroke-width="5"></circle>
                                <circle cx="18" cy="18" r="16" fill="none" class="progress-ring-circle text-amber-500 stroke-current" 
                                        stroke-width="5" 
                                        stroke-dasharray="100" 
                                        stroke-dashoffset="100" 
                                        stroke-linecap="round" 
                                        id="stat-occupancy-ring"></circle>
                            </svg>
                            <div class="absolute top-0 left-0 flex h-full w-full items-center justify-center">
                                <span class="text-sm font-semibold text-amber-600" id="stat-occupancy-label">0%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-red-500 card-hover">
                    <div class="flex justify-between items-start">
                        <div>
                            <span class="text-xs font-semibold text-secondary-500 tracking-wider uppercase">OPEN COMPLAINTS</span>
                            <p class="text-3xl font-bold text-red-700 mt-2" id="stat-open-complaints">0</p>
                            <p class="text-sm text-secondary-500 mt-1">Pending Resolution</p>
                        </div>
                        <div class="p-3 bg-red-50 rounded-xl">
                            <hero-icon-outline name="exclamation-triangle" class="h-6 w-6 text-red-500"></hero-icon-outline>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-emerald-500 card-hover">
                    <div class="flex justify-between items-start">
                        <div>
                            <span class="text-xs font-semibold text-secondary-500 tracking-wider uppercase">DAILY ATTENDANCE</span>
                            <p class="text-3xl font-bold text-emerald-700 mt-2" id="stat-attendance-percent">98%</p>
                            <p class="text-sm text-secondary-500 mt-1">Latest Check-in Rate</p>
                        </div>
                        <div class="relative h-20 w-20 flex-shrink-0">
                            <svg class="h-full w-full" width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="18" cy="18" r="16" fill="none" class="text-emerald-100 stroke-current" stroke-width="5"></circle>
                                <circle cx="18" cy="18" r="16" fill="none" class="progress-ring-circle text-emerald-500 stroke-current" 
                                        stroke-width="5" 
                                        stroke-dasharray="100" 
                                        stroke-dashoffset="2" 
                                        stroke-linecap="round"
                                        id="stat-attendance-ring"></circle>
                            </svg>
                            <div class="absolute top-0 left-0 flex h-full w-full items-center justify-center">
                                <span class="text-sm font-semibold text-emerald-600" id="stat-attendance-label">98%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="show-fees-view-btn" class="bg-white p-6 rounded-xl card-shadow border-l-4 border-teal-500 card-hover cursor-pointer">
                    <div class="flex justify-between items-start">
                        <div>
                            <span class="text-xs font-semibold text-secondary-500 tracking-wider uppercase">FEES STATUS</span>
                            <p class="text-3xl font-bold text-teal-700 mt-2" id="stat-fees-pending">0 Pending</p>
                            <p class="text-sm text-secondary-500 mt-1">Total Dues</p>
                        </div>
                        <div class="p-3 bg-teal-50 rounded-xl">
                            <hero-icon-outline name="banknotes" class="h-6 w-6 text-teal-500"></hero-icon-outline>
                        </div>
                    </div>
                </div>

                <div id="show-visitors-view-btn" class="bg-white p-6 rounded-xl card-shadow border-l-4 border-sky-500 card-hover cursor-pointer">
                    <div class="flex justify-between items-start">
                        <div>
                            <span class="text-xs font-semibold text-secondary-500 tracking-wider uppercase">VISITOR LOGS</span>
                            <p class="text-3xl font-bold text-sky-700 mt-2" id="stat-visitors-today">0 Today</p>
                            <p class="text-sm text-secondary-500 mt-1">Current Entries</p>
                        </div>
                        <div class="p-3 bg-sky-50 rounded-xl">
                            <hero-icon-outline name="identification" class="h-6 w-6 text-sky-500"></hero-icon-outline>
                        </div>
                    </div>
                </div>
            </div>
            
            <hr class="my-10 border-secondary-200">

            <div class="mt-10">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <h2 class="text-2xl font-bold text-secondary-800 flex items-center">
                        <hero-icon-solid name="building-office-2" class="h-6 w-6 text-secondary-600 mr-2"></hero-icon-solid>
                        Hostel Block Summary
                    </h2>
                    <button id="show-add-block-modal-btn" class="mt-4 sm:mt-0 flex items-center px-6 py-3 btn-primary font-semibold rounded-lg text-sm">
                        <hero-icon-solid name="plus" class="h-5 w-5 mr-2"></hero-icon-solid>
                        Add New Block
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="hostel-block-container">
                </div>
            </div>

            <hr class="my-10 border-secondary-200">

            <div class="mt-10">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <h2 class="text-2xl font-bold text-secondary-800 flex items-center">
                        <hero-icon-solid name="calendar-days" class="h-6 w-6 text-secondary-600 mr-2"></hero-icon-solid>
                        Events & Announcements
                    </h2>
                    <button id="show-add-event-modal-btn" class="mt-4 sm:mt-0 flex items-center px-6 py-3 btn-primary font-semibold rounded-lg text-sm">
                        <hero-icon-solid name="calendar-plus" class="h-5 w-5 mr-2"></hero-icon-solid>
                        Add New Event
                    </button>
                </div>
               <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="event-list-container">
               </div>
            </div>

            <hr class="my-10 border-secondary-200">

            <div class="mt-10">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <h2 class="text-2xl font-bold text-secondary-800 flex items-center">
                        <hero-icon-solid name="puzzle-piece" class="h-6 w-6 text-secondary-600 mr-2"></hero-icon-solid>
                        Club Activities / Gymkhana
                    </h2>
                    <button id="show-add-club-activity-modal-btn" class="mt-4 sm:mt-0 flex items-center px-6 py-3 btn-primary font-semibold rounded-lg text-sm">
                        <hero-icon-solid name="calendar-plus" class="h-5 w-5 mr-2"></hero-icon-solid>
                        Add New Activity
                    </button>
                </div>
               <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="club-activity-container">
               </div>
            </div>
            
            <hr class="my-10 border-secondary-200">

            <div class="mt-10">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <h2 class="text-2xl font-bold text-secondary-800 flex items-center">
                        <hero-icon-solid name="archive-box" class="h-6 w-6 text-secondary-600 mr-2"></hero-icon-solid>
                        Hostel Asset Inventory
                    </h2>
                    <button id="show-add-asset-modal-btn" class="mt-4 sm:mt-0 flex items-center px-6 py-3 btn-primary font-semibold rounded-lg text-sm">
                        <hero-icon-solid name="archive-box-arrow-down" class="h-5 w-5 mr-2"></hero-icon-solid>
                        Add New Asset
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="asset-inventory-container">
                    <p class="text-secondary-500 col-span-full flex items-center">
                          <hero-icon-outline name="cube" class="h-5 w-5 mr-2 text-secondary-400"></hero-icon-outline>
                          No assets added yet. Add assets to the inventory.
                    </p>
                </div>
            </div>
        </div> 

        <!-- Detail View -->
        <div id="detail-view" class="hidden">
             <div class="flex items-center mb-8">
                 <button id="back-to-dashboard-btn" class="flex items-center back-btn font-medium transition duration-150 p-3 rounded-lg mr-4">
                     <hero-icon-solid name="arrow-left" class="h-5 w-5 mr-2"></hero-icon-solid>
                     Back to Dashboard
                 </button>
                 <h1 id="detail-hostel-name" class="text-3xl font-bold text-secondary-800 tracking-tight"></h1>
             </div>
            
             <div class="bg-white p-6 rounded-xl card-shadow border-l-8 border-primary-500 mb-8">
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                     <div>
                         <span class="text-secondary-500 font-semibold text-sm uppercase tracking-wider">Capacity</span>
                         <div class="flex items-center justify-center mt-2">
                             <hero-icon-outline name="building-office-2" class="h-6 w-6 text-primary-600 mr-2"></hero-icon-outline>
                             <span class="text-3xl font-bold text-primary-700" id="detail-stat-capacity">0</span>
                         </div>
                     </div>
                     <div class="border-l border-r border-secondary-200">
                         <span class="text-secondary-500 font-semibold text-sm uppercase tracking-wider">Occupancy</span>
                         <div class="flex items-center justify-center mt-2">
                             <hero-icon-outline name="chart-pie" class="h-6 w-6 text-amber-600 mr-2"></hero-icon-outline>
                             <span class="text-3xl font-bold text-amber-700" id="detail-stat-occupancy">0</span>
                         </div>
                     </div>
                     <div>
                         <span class="text-secondary-500 font-semibold text-sm uppercase tracking-wider">Available Beds</span>
                         <div class="flex items-center justify-center mt-2">
                             <hero-icon-outline name="squares-plus" class="h-6 w-6 text-green-600 mr-2"></hero-icon-outline>
                             <span class="text-3xl font-bold text-green-700" id="detail-stat-available">0</span>
                         </div>
                     </div>
                 </div>
             </div>
            
             <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4 bg-white p-4 rounded-xl card-shadow">
                 <div class="flex flex-wrap gap-4">
                      <button id="show-add-student-modal-btn" class="flex items-center px-5 py-2.5 btn-primary font-semibold rounded-lg text-sm">
                              <hero-icon-solid name="user-plus" class="h-5 w-5 mr-2"></hero-icon-solid>
                              Add New Student
                      </button>
                      <button id="show-add-room-modal-btn" class="flex items-center px-5 py-2.5 btn-primary font-semibold rounded-lg text-sm">
                              <hero-icon-solid name="building-office-2" class="h-5 w-5 mr-2"></hero-icon-solid>
                              Add New Room
                      </button>
                 </div>
                 
                 <div class="flex flex-col sm:flex-row gap-4 w-full md:w-auto">
                      <div class="relative w-full sm:w-48">
                          <hero-icon-outline name="magnifying-glass" class="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-secondary-400"></hero-icon-outline>
                          <input type="text" id="room-search-input" placeholder="Search room number..." class="pl-10 pr-4 py-2 border border-secondary-300 rounded-lg shadow-sm w-full focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition duration-150">
                      </div>
                      <select id="room-filter-select" class="px-4 py-2 border border-secondary-300 rounded-lg shadow-sm w-full sm:w-32 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition duration-150">
                          <option value="All">All Rooms</option>
                          <option value="Full">Full</option>
                          <option value="Available">Available</option>
                      </select>
                 </div>
             </div>

             <div id="room-list-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
             </div>
        </div>

        <!-- Fees View -->
        <div id="fees-view" class="hidden">
             <div class="flex items-center mb-8">
                 <button id="back-to-dashboard-from-fees-btn" class="flex items-center back-btn font-medium transition duration-150 p-3 rounded-lg mr-4">
                     <hero-icon-solid name="arrow-left" class="h-5 w-5 mr-2"></hero-icon-solid>
                     Back to Dashboard
                 </button>
                 <h1 class="text-3xl font-bold text-teal-700 tracking-tight flex items-center">
                     <hero-icon-solid name="banknotes" class="h-7 w-7 mr-2"></hero-icon-solid>
                     Fees Management
                 </h1>
             </div>
            
             <div class="flex flex-col md:flex-row justify-end items-center mb-6 gap-4 bg-white p-4 rounded-xl card-shadow">
                 <div class="relative w-full md:w-64">
                     <hero-icon-outline name="magnifying-glass" class="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-secondary-400"></hero-icon-outline>
                     <input type="text" id="fees-search-input" placeholder="Search by name or roll no..." class="pl-10 pr-4 py-2 border border-secondary-300 rounded-lg shadow-sm w-full focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition duration-150">
                 </div>
                 <select id="fees-filter-select" class="px-4 py-2 border border-secondary-300 rounded-lg shadow-sm w-full md:w-32 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition duration-150">
                     <option value="All">All Statuses</option>
                     <option value="Paid">Paid</option>
                     <option value="Pending">Pending</option>
                 </select>
             </div>
            
             <div class="bg-white rounded-xl card-shadow overflow-hidden">
                 <div class="overflow-x-auto">
                     <table class="w-full min-w-max">
                         <thead class="bg-secondary-50 border-b border-secondary-200">
                             <tr>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Student Name</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Roll Number</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Block / Room</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Status</th>
                                 <th class="px-6 py-3 text-center text-xs font-bold text-secondary-700 uppercase tracking-wider">Action</th>
                             </tr>
                         </thead>
                         <tbody id="fees-student-list-container" class="divide-y divide-secondary-200">
                         </tbody>
                     </table>
                 </div>
             </div>
        </div>
        
        <!-- Visitors View -->
        <div id="visitors-view" class="hidden">
             <div class="flex items-center mb-8">
                 <button id="back-to-dashboard-from-visitors-btn" class="flex items-center back-btn font-medium transition duration-150 p-3 rounded-lg mr-4">
                     <hero-icon-solid name="arrow-left" class="h-5 w-5 mr-2"></hero-icon-solid>
                     Back to Dashboard
                 </button>
                 <h1 class="text-3xl font-bold text-sky-700 tracking-tight flex items-center">
                     <hero-icon-solid name="user-group" class="h-7 w-7 mr-2"></hero-icon-solid>
                     Visitor Logs
                 </h1>
             </div>
            
             <div class="flex flex-col md:flex-row justify-end items-center mb-6 gap-4 bg-white p-4 rounded-xl card-shadow">
                 <div class="relative w-full md:w-64">
                     <hero-icon-outline name="magnifying-glass" class="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-secondary-400"></hero-icon-outline>
                     <input type="text" id="visitor-search-input" placeholder="Search by visitor or student name..." class="pl-10 pr-4 py-2 border border-secondary-300 rounded-lg shadow-sm w-full focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition duration-150">
                 </div>
                 <input type="date" id="visitor-date-filter" class="px-4 py-2 border border-secondary-300 rounded-lg shadow-sm w-full md:w-36 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition duration-150">
             </div>
            
             <div class="bg-white rounded-xl card-shadow overflow-hidden">
                 <div class="overflow-x-auto">
                     <table class="w-full min-w-max">
                         <thead class="bg-secondary-50 border-b border-secondary-200">
                             <tr>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Visitor Name</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Student Visited</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Room</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Date</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Time In</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Time Out</th>
                             </tr>
                         </thead>
                         <tbody id="visitor-log-container" class="divide-y divide-secondary-200">
                         </tbody>
                     </table>
                 </div>
             </div>
        </div>

        <!-- Complaints View -->
        <div id="complaints-view" class="hidden">
             <div class="flex items-center mb-8">
                 <button id="back-to-dashboard-from-complaints-btn" class="flex items-center back-btn font-medium transition duration-150 p-3 rounded-lg mr-4">
                     <hero-icon-solid name="arrow-left" class="h-5 w-5 mr-2"></hero-icon-solid>
                     Back to Dashboard
                 </button>
                 <h1 class="text-3xl font-bold text-red-700 tracking-tight flex items-center">
                     <hero-icon-solid name="bell-alert" class="h-7 w-7 mr-2"></hero-icon-solid>
                     Student Complaints
                 </h1>
             </div>
            
             <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4 bg-white p-4 rounded-xl card-shadow">
                 <div class="flex flex-col md:flex-row gap-4 w-full md:w-auto">
                     <div class="relative w-full md:w-56">
                         <hero-icon-outline name="magnifying-glass" class="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-secondary-400"></hero-icon-outline>
                         <input type="text" id="complaint-search-input" placeholder="Search by student or room..." class="pl-10 pr-4 py-2 border border-secondary-300 rounded-lg shadow-sm w-full focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition duration-150">
                     </div>
                     <select id="complaint-status-filter" class="px-4 py-2 border border-secondary-300 rounded-lg shadow-sm w-full md:w-36 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition duration-150">
                         <option value="All">All Status</option>
                         <option value="Pending">Pending</option>
                         <option value="In Progress">In Progress</option>
                         <option value="Resolved">Resolved</option>
                     </select>
                     <select id="complaint-type-filter" class="px-4 py-2 border border-secondary-300 rounded-lg shadow-sm w-full md:w-40 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition duration-150">
                         <option value="All">All Types</option>
                         <option value="Maintenance">Maintenance</option>
                         <option value="Cleaning">Cleaning</option>
                         <option value="Electrical">Electrical</option>
                         <option value="Plumbing">Plumbing</option>
                         <option value="Internet">Internet</option>
                         <option value="Security">Security</option>
                         <option value="Other">Other</option>
                     </select>
                 </div>
                 <button id="refresh-complaints-btn" class="flex items-center px-4 py-2 btn-primary font-semibold rounded-lg text-sm">
                     <hero-icon-solid name="arrow-path" class="h-5 w-5 mr-2"></hero-icon-solid>
                     Refresh
                 </button>
             </div>
            
             <div class="bg-white rounded-xl card-shadow overflow-hidden">
                 <div class="overflow-x-auto">
                     <table class="w-full min-w-max">
                         <thead class="bg-secondary-50 border-b border-secondary-200">
                             <tr>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Student</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Room</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Complaint Type</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Description</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Date</th>
                                 <th class="px-6 py-3 text-left text-xs font-bold text-secondary-700 uppercase tracking-wider">Status</th>
                                 <th class="px-6 py-3 text-center text-xs font-bold text-secondary-700 uppercase tracking-wider">Actions</th>
                             </tr>
                         </thead>
                         <tbody id="complaints-list-container" class="divide-y divide-secondary-200">
                         </tbody>
                     </table>
                 </div>
             </div>
        </div>

    </main>

    <footer class="mt-12 py-6 border-t border-secondary-200 bg-white shadow-inner">
        <div class="w-full mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-sm text-secondary-500">
                &copy; 2025 Indian Institute of Technology. All rights reserved.
            </p>
        </div>
    </footer>

    <!-- Modals would go here (same as your original code) -->

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Global State
        let appState = { 
            blocks: [], 
            assets: [],
            complaints: []
        };
        
        // DOM Elements
        const dashboardView = document.getElementById('dashboard-view');
        const detailView = document.getElementById('detail-view');
        const feesView = document.getElementById('fees-view');
        const visitorsView = document.getElementById('visitors-view');
        const complaintsView = document.getElementById('complaints-view');
        
        // Back to Dashboard Buttons
        const backToDashboardBtn = document.getElementById('back-to-dashboard-btn');
        const backToDashboardFromFeesBtn = document.getElementById('back-to-dashboard-from-fees-btn');
        const backToDashboardFromVisitorsBtn = document.getElementById('back-to-dashboard-from-visitors-btn');
        const backToDashboardFromComplaintsBtn = document.getElementById('back-to-dashboard-from-complaints-btn');
        
        // View Navigation Buttons
        const showFeesViewBtn = document.getElementById('show-fees-view-btn');
        const showVisitorsViewBtn = document.getElementById('show-visitors-view-btn');
        const showComplaintsViewBtn = document.getElementById('show-complaints-view-btn');
        
        // Other DOM elements
        const hostelBlockContainer = document.getElementById('hostel-block-container');
        const detailHostelName = document.getElementById('detail-hostel-name');
        const roomListContainer = document.getElementById('room-list-container');
        
        // Statistics elements
        const statTotalCapacity = document.getElementById('stat-total-capacity');
        const statOccupancyPercent = document.getElementById('stat-occupancy-percent');
        const statOccupancyLabel = document.getElementById('stat-occupancy-label');
        const statOccupancyRing = document.getElementById('stat-occupancy-ring');
        const statOpenComplaints = document.getElementById('stat-open-complaints');
        const statFeesPending = document.getElementById('stat-fees-pending');
        const statVisitorsToday = document.getElementById('stat-visitors-today');
        
        // Detail view statistics
        const detailStatCapacity = document.getElementById('detail-stat-capacity');
        const detailStatOccupancy = document.getElementById('detail-stat-occupancy');
        const detailStatAvailable = document.getElementById('detail-stat-available');

        // View Management Functions
        function hideAllViews() {
            dashboardView.classList.add('hidden');
            detailView.classList.add('hidden');
            feesView.classList.add('hidden');
            visitorsView.classList.add('hidden');
            complaintsView.classList.add('hidden');
        }
        
        function showDashboard() {
            hideAllViews();
            dashboardView.classList.remove('hidden');
            loadHostelData();
        }
        
        function showDetailView(blockKey) {
            hideAllViews();
            detailView.classList.remove('hidden');
            renderDetailView(blockKey);
        }
        
        function showFeesView() {
            hideAllViews();
            feesView.classList.remove('hidden');
            renderFeesView();
        }
        
        function showVisitorsView() {
            hideAllViews();
            visitorsView.classList.remove('hidden');
            renderVisitorsView();
        }
        
        function showComplaintsView() {
            hideAllViews();
            complaintsView.classList.remove('hidden');
            loadComplaintsData();
        }

        // Event Listeners for Navigation
        backToDashboardBtn.addEventListener('click', showDashboard);
        backToDashboardFromFeesBtn.addEventListener('click', showDashboard);
        backToDashboardFromVisitorsBtn.addEventListener('click', showDashboard);
        backToDashboardFromComplaintsBtn.addEventListener('click', showDashboard);
        
        showFeesViewBtn.addEventListener('click', showFeesView);
        showVisitorsViewBtn.addEventListener('click', showVisitorsView);
        showComplaintsViewBtn.addEventListener('click', showComplaintsView);
        
        // Hostel block click handler
        hostelBlockContainer.addEventListener('click', (e) => {
            const link = e.target.closest('.block-link');
            if (link) {
                e.preventDefault();
                const blockKey = link.dataset.hostelKey;
                showDetailView(blockKey);
            }
        });

        // Data Loading Functions
        async function loadHostelData() {
            try {
                const res = await fetch('/api/blocks');
                if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
                const data = await res.json();
                if (data.success) {
                    appState.blocks = data.blocks; 
                    renderDashboard();
                } else { 
                    throw new Error(data.message); 
                }
            } catch (error) {
                console.error('Error loading hostel data:', error);
                hostelBlockContainer.innerHTML = `
                    <div class="col-span-full text-center py-8">
                        <hero-icon-outline name="exclamation-triangle" class="h-12 w-12 text-red-500 mx-auto mb-4"></hero-icon-outline>
                        <p class="text-red-500 font-medium">Failed to load hostel data</p>
                        <p class="text-secondary-500 mt-2">Please check your connection and try again</p>
                    </div>
                `;
            }
        }

        async function loadComplaintsData() {
            try {
                const res = await fetch('/api/complaints');
                if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
                const data = await res.json();
                if (data.success) {
                    appState.complaints = data.complaints;
                    updateComplaintsCount();
                    renderComplaintsView();
                } else { 
                    throw new Error(data.message); 
                }
            } catch (error) {
                console.error('Error loading complaints:', error);
                complaintsListContainer.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center text-red-500 py-6">
                            <hero-icon-outline name="exclamation-circle" class="h-5 w-5 inline-block mr-1"></hero-icon-outline> 
                            Failed to load complaints
                        </td>
                    </tr>
                `;
            }
        }

        // Rendering Functions
        function renderDashboard() {
            hostelBlockContainer.innerHTML = '';
            let grandTotalCapacity = 0;
            let grandTotalStudents = 0;
            let totalPendingFees = 0;

            if (!appState.blocks || appState.blocks.length === 0) {
                hostelBlockContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <hero-icon-outline name="building-office-2" class="h-16 w-16 text-secondary-400 mx-auto mb-4"></hero-icon-outline>
                        <h3 class="text-lg font-semibold text-secondary-700 mb-2">No Hostel Blocks</h3>
                        <p class="text-secondary-500 mb-4">Get started by adding your first hostel block</p>
                        <button id="show-add-block-modal-btn" class="btn-primary px-4 py-2 rounded-lg font-medium">
                            Add First Block
                        </button>
                    </div>
                `;
                return;
            }

            for (const block of appState.blocks) {
                const totalRooms = block.rooms ? block.rooms.length : 0;
                let currentStudents = 0;
                let totalCapacity = 0;
                
                if (block.rooms) {
                    block.rooms.forEach(room => {
                        const studentsInRoom = room.students ? room.students.length : 0;
                        currentStudents += studentsInRoom;
                        totalCapacity += (room.capacity || 0);
                        
                        if (room.students) {
                            room.students.forEach(student => {
                                if (student.feeStatus === 'Pending') {
                                    totalPendingFees++;
                                }
                            });
                        }
                    });
                }
                
                const occupiedRooms = block.rooms ? block.rooms.filter(room => room.students && room.students.length > 0).length : 0;
                
                grandTotalCapacity += totalCapacity;
                grandTotalStudents += currentStudents;

                const blockHTML = `
                    <div class="bg-white rounded-xl card-shadow overflow-hidden border-l-4 border-primary-500 card-hover">
                        <a href="#" class="block-link block hover:bg-secondary-50 p-6" data-hostel-key="${block.blockKey}">
                            <div class="flex items-center mb-4">
                                <div class="p-3 bg-primary-50 rounded-xl">
                                    <hero-icon-outline name="building-office-2" class="h-6 w-6 text-primary-500"></hero-icon-outline>
                                </div>
                                <h3 class="text-xl font-bold text-secondary-800 ml-4">${block.blockName}</h3>
                            </div>
                            <div class="grid grid-cols-2 gap-x-4 gap-y-2 text-sm">
                                <div><span class="text-secondary-500 font-medium">Total Rooms</span><p class="text-lg font-semibold text-secondary-800">${totalRooms}</p></div>
                                <div><span class="text-secondary-500 font-medium">Occupied Rooms</span><p class="text-lg font-semibold text-secondary-800">${occupiedRooms}</p></div>
                                <div><span class="text-secondary-500 font-medium">Current Students</span><p class="text-lg font-semibold text-secondary-800">${currentStudents}</p></div>
                                <div><span class="text-secondary-500 font-medium">Total Capacity</span><p class="text-lg font-semibold text-secondary-800">${totalCapacity}</p></div>
                            </div>
                        </a>
                    </div>
                `;
                hostelBlockContainer.innerHTML += blockHTML;
            }
            
            // Update statistics
            statTotalCapacity.textContent = grandTotalCapacity;
            const occupancyPercent = grandTotalCapacity > 0 ? (grandTotalStudents / grandTotalCapacity * 100) : 0;
            statOccupancyPercent.textContent = occupancyPercent.toFixed(1) + '%';
            statOccupancyLabel.textContent = occupancyPercent.toFixed(0) + '%';
            statOccupancyRing.style.strokeDashoffset = 100 - occupancyPercent;
            
            statFeesPending.textContent = `${totalPendingFees} Pending`;
        }

        function renderDetailView(blockKey) {
            const block = appState.blocks.find(b => b.blockKey === blockKey);
            if (!block) { 
                console.error('Block not found:', blockKey);
                showDashboard();
                return; 
            }
            
            detailView.dataset.currentHostelKey = block.blockKey;
            detailHostelName.textContent = block.blockName;
            
            let hostelCapacity = 0, hostelOccupancy = 0;
            roomListContainer.innerHTML = '';
            
            const rooms = block.rooms || [];
            rooms.sort((a, b) => a.roomNumber.localeCompare(b.roomNumber, undefined, { numeric: true, sensitivity: 'base' }));

            if (rooms.length === 0) {
                roomListContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <hero-icon-outline name="building-office" class="h-16 w-16 text-secondary-400 mx-auto mb-4"></hero-icon-outline>
                        <h3 class="text-lg font-semibold text-secondary-700 mb-2">No Rooms Added</h3>
                        <p class="text-secondary-500">Add rooms to start managing this hostel block</p>
                    </div>
                `;
            } else {
                rooms.forEach(room => {
                    const current = room.students ? room.students.length : 0;
                    const max = room.capacity; 
                    hostelCapacity += max; 
                    hostelOccupancy += current;
                    
                    const percent = max > 0 ? (current / max) * 100 : 0;
                    const studentNames = (room.students && room.students.length > 0) ? 
                        room.students.map(s => s.name).join(', ') : 'Vacant';
                    
                    const status = current >= max ? 
                        { text: 'Full', classes: 'bg-red-500 text-white', progress: 'bg-red-500' } : 
                        { text: 'Available', classes: 'bg-green-500 text-white', progress: 'bg-green-500' };
                    
                    const roomHTML = `
                        <div class="room-card bg-white rounded-xl card-shadow overflow-hidden transition-all duration-300 hover:shadow-xl cursor-pointer" data-room-id="${room.roomNumber}">
                            <div class="p-5">
                                <div class="flex justify-between items-center mb-2">
                                    <h3 class="text-xl font-bold text-secondary-800">${room.roomNumber}</h3>
                                    <span class="text-xs font-bold px-3 py-1 rounded-full ${status.classes}">${status.text}</span>
                                </div>
                                <p class="text-sm text-secondary-500 mb-4">Capacity: ${current}/${max}</p>
                                <div class="w-full bg-secondary-200 rounded-full h-2 mb-3">
                                    <div class="h-2 rounded-full ${status.progress}" style="width: ${percent}%"></div>
                                </div>
                                <p class="text-sm text-secondary-700 truncate">Occupants: ${studentNames}</p>
                            </div>
                        </div>
                    `;
                    roomListContainer.innerHTML += roomHTML;
                });
            }
            
            detailStatCapacity.textContent = hostelCapacity; 
            detailStatOccupancy.textContent = hostelOccupancy; 
            detailStatAvailable.textContent = hostelCapacity - hostelOccupancy;
        }

        function renderFeesView() {
            // This would render the fees management view
            feesStudentListContainer.innerHTML = `
                <tr>
                    <td colspan="5" class="text-center text-secondary-500 py-8">
                        <hero-icon-outline name="banknotes" class="h-8 w-8 mx-auto mb-2"></hero-icon-outline>
                        <p>Fees management view</p>
                    </td>
                </tr>
            `;
        }

        function renderVisitorsView() {
            // This would render the visitors view
            visitorLogContainer.innerHTML = `
                <tr>
                    <td colspan="6" class="text-center text-secondary-500 py-8">
                        <hero-icon-outline name="user-group" class="h-8 w-8 mx-auto mb-2"></hero-icon-outline>
                        <p>Visitor logs view</p>
                    </td>
                </tr>
            `;
        }

        function renderComplaintsView() {
            // This would render the complaints view
            complaintsListContainer.innerHTML = `
                <tr>
                    <td colspan="7" class="text-center text-secondary-500 py-8">
                        <hero-icon-outline name="clipboard-document-list" class="h-8 w-8 mx-auto mb-2"></hero-icon-outline>
                        <p>Complaints management view</p>
                    </td>
                </tr>
            `;
        }

        function updateComplaintsCount() {
            const openComplaints = appState.complaints.filter(complaint => 
                complaint.status === 'Pending' || complaint.status === 'In Progress'
            ).length;
            statOpenComplaints.textContent = openComplaints;
        }

        // Initialize the application
        function initApp() {
            showDashboard();
            loadHostelData();
            loadComplaintsData();
        }

        initApp();
    });
    </script>
</body>
</html>