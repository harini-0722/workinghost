<style>
    /* Add this to your existing styles */
    .fee-success-card {
        background: white;
        border-radius: 24px;
        padding: 40px;
        text-align: center;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1);
    }
    .spinner-border {
        border-right-color: transparent;
        animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .hidden { display: none !important; }
</style>

<div id="fees-payment-container" class="max-w-md mx-auto bg-white rounded-3xl shadow-lg overflow-hidden border border-slate-100">
    <div class="bg-indigo-600 p-6 text-center text-white">
        <h2 class="text-2xl font-bold">Hostel Fee Payment</h2>
        <p class="text-indigo-100 text-sm">Secure Transaction Portal</p>
    </div>

    <div id="payment-form-step" class="p-8">
        <div class="bg-slate-50 rounded-2xl p-6 text-center mb-8 border border-slate-100">
            <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1">Amount to Pay</p>
            <p class="text-4xl font-black text-slate-900">â‚¹ 5,500.00</p>
        </div>

        <div class="mb-6">
            <p class="text-sm font-bold text-slate-700 mb-4">Select Payment Method</p>
            <div class="grid grid-cols-2 gap-4">
                <button class="border-2 border-indigo-600 rounded-2xl p-4 flex flex-col items-center gap-2 bg-indigo-50/50">
                    <i class="fas fa-mobile-alt text-indigo-600"></i>
                    <span class="text-xs font-bold">UPI / QR</span>
                </button>
                <button class="border-2 border-slate-100 rounded-2xl p-4 flex flex-col items-center gap-2 hover:bg-slate-50 transition-colors">
                    <i class="fas fa-credit-card text-slate-400"></i>
                    <span class="text-xs font-bold text-slate-500">Card</span>
                </button>
            </div>
        </div>

        <div class="mb-8">
            <label class="block text-xs font-bold text-slate-500 mb-2 uppercase">Enter VPA / UPI ID</label>
            <input type="text" id="vpa-input" placeholder="username@upi" class="w-full border-2 border-slate-100 p-4 rounded-xl focus:border-indigo-600 outline-none transition-all font-medium">
            <p class="text-[10px] text-slate-400 mt-2 italic text-center">OR scan QR on the next step</p>
        </div>

        <button onclick="handleInitialPay()" class="w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-3 transition-transform active:scale-95">
            <i class="fas fa-lock text-sm opacity-50"></i> Pay Now
        </button>
    </div>

    <div id="processing-step" class="hidden p-20 text-center">
        <div class="inline-block w-16 h-16 border-4 border-indigo-600 border-solid rounded-full spinner-border mb-6"></div>
        <h3 class="text-xl font-bold text-slate-800">Verifying Payment</h3>
        <p class="text-slate-500 text-sm mt-2">Please do not refresh this page...</p>
    </div>

    <div id="success-step" class="hidden p-8 text-center animate-in zoom-in duration-300">
        <div class="w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6 text-3xl">
            <i class="fas fa-check"></i>
        </div>
        <h2 class="text-2xl font-black text-slate-800 mb-2">Payment Successful!</h2>
        <p class="text-slate-500 text-sm mb-6 font-medium">Your hostel fee has been received.</p>
        
        <div class="bg-slate-50 rounded-2xl p-4 mb-8 text-left text-xs space-y-2">
            <div class="flex justify-between"><span>Transaction ID</span><span class="font-bold">#TXN9920CS77</span></div>
            <div class="flex justify-between"><span>Date</span><span class="font-bold" id="current-date-span"></span></div>
            <div class="flex justify-between"><span>Status</span><span class="text-green-600 font-bold uppercase">Settled</span></div>
        </div>

        <button onclick="alert('Downloading Receipt...')" class="w-full bg-slate-900 text-white py-4 rounded-xl font-bold flex items-center justify-center gap-3 mb-4">
            <i class="fas fa-file-pdf"></i> Download Receipt
        </button>
        <button onclick="location.reload()" class="text-indigo-600 font-bold text-sm hover:underline">Return to Portal</button>
    </div>
</div>

<script>
    function handleInitialPay() {
        const vpa = document.getElementById('vpa-input').value;
        if (!vpa || !vpa.includes('@')) {
            alert("Please enter a valid UPI ID");
            return;
        }

        // 1. Hide the form
        document.getElementById('payment-form-step').classList.add('hidden');
        
        // 2. Show processing
        document.getElementById('processing-step').classList.remove('hidden');

        // 3. Simulate bank delay (3 seconds)
        setTimeout(() => {
            document.getElementById('processing-step').classList.add('hidden');
            document.getElementById('success-step').classList.remove('hidden');
            
            // Set current date
            document.getElementById('current-date-span').innerText = new Date().toLocaleDateString('en-IN', {
                day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit'
            });
        }, 3000);
    }
</script>